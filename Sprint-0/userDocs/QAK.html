<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="it">

<!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->


<head>
    <title>QAK</title>
    <link href="defaultStyle.css" rel="stylesheet">
    <style>
        body {
            margin-left: 30px;
            margin-right: 30px;
            font-size: 0.85em;
        }

        p {
            font-family: Tahoma,serif;
            font-size: 0.85em;
        }

        a, a:visited, a:active, a:link, a:hover {
            text-decoration: underline;
            color: #545454;
            background-color: transparent;
            font-size: 93%;
        }

        a:hover {
            background-color: #cccccc;
        }

        hr {
            clear: both;
            height: 1px;
            color: #242424;
            background-color: transparent;
        }

        h1, h2, h3 {
            color: #242424;
            clear: left;
            font: 100% Tahoma, Helvetica, Arial, sans-serif;
            margin-bottom: 0.5em;
            border-radius: 10px;
            padding: 5px;
        }

        #top {
            width: 100%;
        }


        #i {
            color: #ff1010;
        }

        tt {
            font-family: "Arial",serif;
            font-size: 90%;
            color: #006600;
        }

        em {
            font-family: "Arial",serif;
            font-size: 80%;
            font-weight: bold;
            border-style: solid;
            border-color: #abe876;
            color: #1632cc;
        }

        bc {
            font-family: "Arial",serif;
            font-size: 90%;
            font-weight: bold;
            color: #990000;
            background-color: #fcf8c7;
        }

        ks {
            font-family: "Arial",serif;
            font-weight: bold;
            color: #0000CD;
            font-size: 90%;
        }

        kc {
            font-family: "Arial",serif;
            font-weight: bold;
            color: #008000;
            font-size: 90%;
        }

        pre {
            font-family: "Consolas", co,serif;
            font-size: 15px;
            background-color: #f5f5f5;
            border: 2px solid silver;
            padding: 1px;
        }

        m {
            font-family: "Helvetica",serif;
            line-height: 100%;
            font-size: 75%;
        }

        div.body {
            font-size: 1.3em;
        }

        k {
            color: #990000;
            font-weight: bold;
            font-size: 90%;
            display: block;
        }

        h1 {
            font-size: 150%;
            background-color: #b2c0ff;
            padding: 10px;
        }

        h2 {
            background-color: #9ed8ff;
            font-size: 130%;
        }

        h3 {
            /*background-color: #e6ccff;*/
            background-color: lightblue;
            font-size: 100%;
            /*color: white;*/
            /*font-weight: bold;*/
        }

        h4 {
            background-color: #ccffcc;
            font-size: 100%;
            width: 95%;
            border-radius: 5px;
            padding: 2px;
        }

        h5 {
            background-color: #d5ffb0;
            font-size: 100%;
        }

        div.req {
            background-color: #d9ffb3;
            font-size: 18px;
            width: 700px;
            border: 3px solid green;
            padding: 15px;
            margin: 10px;
        }

        div.remark {
            background-color: #E3F2FD;
            border: 2px solid #d5f2ed;
            padding: 15px;
            margin: 10px;
            border-radius: 25px;
        }

        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        ol, ul, li {
            margin: 0;
            margin-left: 10px;
            padding: 0;
            padding-bottom: 5px;
        }

        table, th, td {
            border: 1px solid black;
        }

        img {
            border: 3px solid #d5f2ed;
            background-color: white;
            padding: 5px;
            width: 60%;
            margin: auto;
            display: block;
        }

        a, a:visited, a:active, a:link, a:hover {
            text-decoration: underline;
            color: #545454;
            background-color: transparent;
        }

        div.wrapdesc {
            width: 90%;
            margin: auto;
        }

        div.imagedesc {
            width: 85%;
            margin: auto;
        }

        def {
            display: block;
            margin: 1px 10px;
        }

        dt {
            font-style: italic;
            font-size: 20pt;
            margin: 10px 0;
        }

        r {
            font-style: italic;
            font-weight: bold;
            color: blue;
        }
    </style>
</head>


<body>
<div id="top">
    <h1>QAK </h1>
</div>

<div class="body">
   

   

    <!----------------------- REQUIREMENT ANALYSIS --------------------------->

    <h2>QActor (meta)model</h2>
    <div class="remark">
        QActor è il nome dato al linguaggio personalizzato ispirato al <b>Akka actor model</b> basato, a sua volta, sul lavoro di <b>Hewitt</b> al MIT.
		</br>
		È un linguaggio di modellazione per l'analisi e il progetto di applicazioni e per la definizione di modelli di comportamento di attori che si comportano come <i>Finite State Machines</i>.
		</br>
		Inoltre l'aggiunta di <b>k</b> al prefisso significa che il linguaggio fa riferimento alla versione implementata in <b>Kotlin</b>, senza utilizzare alcun supporto Akka (come fatto nella prima versione del linguaggio).
		</br>
		</br>
		Il linguaggio Qak è definito utilizzando il framework <b>Xtext</b> e si basa su un nucleo di concetti che compongono il <i>metamodello QActor</i>. Possiamo riassumere questi concetti come segue:
		<ul>
		</br>
		<li>Un <b>QA-System</b> è una collezione di entità attive (QActors) ognuna eseguita in un nodo computazionale (<b>Context</b>).</li>
		<li>QActors interagiscono usando messaggi di diversi tipi come <b>Dispatch</b> e <b>Request</b> ed <b>Eventi</b>.</li>
		<li>Ogni contesto presenta un insime di QActors che possono interagire con componenti (attori o "alieni") che lavorano in nodi differenti, ciò avviene tramite l'utilizzo di appositi protocolli, in particolare 
		    <b><i>TCP</i></b> e <b><i>CoAP</i></b> lavorano sulla porta specificata dal Context, mentre l'<b><i>MQTT</i></b> utilizza il broker specificato nella dichiarazione <i>mqttBroker</i>.</li>
        </ul>
    </div>

    <h2>QActor software factory</h2>
    <div class="remark">
	     Il mapping tra le azioni di comunicazione di alto livello e uno spicifico protocollo avvine tramite la <b>QActor-infrastructure</b> con l'aiuto dell'<b>Eclipse QActor software factory</b>.
		 </br>
		 </br>
		  <img src="./img/qakSoftwareFactory.png" style="width: 40%" alt="qakSoftwareFactory">
    </div>


    <h2>Messaggi ed eventi</h2>
	<div class="remark">
	Nel metamodello QActor:
	<ul>
	</br>
	<li>Un <b>messaggio</b> è inteso come un'informazione inviata in maniera asincrona da un mittente ad uno specifico destinatario.</br>
	    Per trasmissione asincrona intedniamo che i messaggi posso essere "bufferizzati" dall'infrastruttura, mentre la trasmissione "non bufferizzata" è detta sincrona.</li>
	<li>Un <b>evento</b> è inteso come un'informazione emessa da un mittente senza uno specifico destinatario.</li>
	</ul>
	</br>
	I metodi che un apllication designer può utilizzare per inviare messaggi sono:
        <ul>
            </br>
            <li><b>Forward</b> per un Dispatch.</li>
            <li><b>Request,replyTo,askFor</b> per una Request.</li>
            <li><b>Emit</b> per un Event.</li>
        </ul>
	 </div>



    <h2>Qak specification template</h2>
	<div class="remark">
	     Un modello Qak viene definito organizzando la sua descrizione in base al seguente template:
		 <code><pre>
		 
 System < NAME OF THE SYSTEM >
 //mqttBroker "broker.hivemq.com" : 1883 //OPTIONAL

 //DECLARATION OF MESSAGES AND EVENTS

 //DECLARATION OF CONTEXTS
 Context CTXNAME ip [host="HOSTIP" port=PORTNUM]

 //DECLARATION OF ACTORS
		</pre></code>
	
	
	 </div>
	 
	<h2>Qak syntax</h2>
	<div class="remark">
	<h3>Dichiarazione dei messaggi</h3>
		<code><pre>
		
 Event:    "Event"     name=ID  ":" msg = PHead  ;
 Dispatch: "Dispatch"  name=ID  ":" msg = PHead  ;
 Request:  "Request"   name=ID  ":" msg = PHead  ;
 Reply:    "Reply"     name=ID  ":" msg = PHead  ;

 PHead :       PAtom | PStruct | PStructRef ;
 ...
		</pre></code> 
	<h3>Operazioni di invio messaggi</h3>
		<code><pre>
		
 Forward   : "forward" dest=[QActorDeclaration] 
                       "-m" msgref=[Dispatch] ":" val = PHead ;
 Emit      : "emit" msgref=[Event] ":" val = PHead     ;
 Demand    : "request" dest=[QActorDeclaration] 
                       "-m" msgref=[Request]  ":" val = PHead ;
 Answer    : "replyTo" reqref=[Request] 
                       "with"    msgref=[Reply]   ":" val = PHead ;
 ReplyReq  : "askFor"  reqref=[Request] 
                       "request" msgref=[Request] ":" val = PHead ;
		</pre></code> 
	
	
	
	</div>
	
	<h2>Qak:esempio</h2>
	<div class="remark">
	Il linguaggio Qak mira a esprimere modelli eseguibili, ma non è completo dal punto di vista computazionale. 
	Dunque, parte del comportamento potrebbe talvolta dover essere espresso direttamente in Kotlin. Ma occorre non esagerare l’uso di una tale possibilità.
	<h3>demonottodo.qak</h3>
	Questo esempio definisce un attore che, una volta attivato, calcola il numero di Fibonacci di posizione 7 usando codice Kotlin.
	    <code><pre>
		
 System demonottodo	
 Context ctxdemonottodo ip [host="localhost" port=8055] 
 
 QActor demonottodo context ctxdemonottodo{
    State s0 initial {
  [#
    fun fibo(n: Int) : Int {
      if( n < 0 ) throw Exception("fibo argument must be >0")
      if( n == 0 || n==1 ) return n
      return fibo(n-1)+fibo(n-2)
    }
    println("---------------------------------------------------- ")
    println("This actor definies its activity completelyin Kotlin")
    val n = 7
    val v = fibo(n)
    println("fibo($n)=$v")
    println("----------------------------------------------------- ")
  #]
  }
}
		</pre></code>
Quando questo file viene salvato, la Qak Software Factory genera il file <i>demonottodo.pl</i>:
        <code><pre>
 context(ctxdemonottodo, "localhost",  "TCP", "8055").
 qactor( demonottodo, ctxdemonottodo, "it.unibo.demonottodo.Demonottodo").
        </pre></code>

</div>
    <h2>QActor Complete Documentation</h2>
    <div class="remark">
        <p>Nel seguente file la documentazione completa: <a href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/anatali/issLab2022/main/it.unibo.issLabStart/userDocs/Dispense/lezioni/html/QakIntro.html">QActor (meta)model</a> </p>
    </div>

    <!-- USEFUL
    <table style="width:100%" border="1">
    <tr>
    <td style="width:50%">
    </td>
    <td></td>
    </tr>
    </table>
    -->

    <br><br>
</div>

<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:left;color:white">
<!--    //TODO. To fix with the standard one from the main file-->
    By Antonio Franzese, Luca De Risi, Luca Landolfi 
	</br>
	email: antonio.franzese4@studio.unibo.it; luca.derisi@studio.unibo.it; luca.landolfi3@studio.unibo.it
    <img class="centerimg" src="./img/img_luca.png" style="width: 30%; height: 30%; border: 0px">
	<img class="centerimg" src="./img/img_anto.jpg" style="width: 30%; height: 30%; border: 0px">
	<img class="centerimg" src="./img/img_lude.JPG" style="width: 30%; height: 30%; border: 0px">
</div>
</body>
</html>
